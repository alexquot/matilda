@import "elevation";
@import "variables";
@import "~bootstrap/scss/bootstrap";
@import "table-key-value";
@import "ripple";
@import "btn-rounded";

body,
body.modal-open {
  height: 100%;
  overflow-y: scroll;
  padding-right: 0 !important;
}

*,
*:focus,
*:active {
  outline: none;
}

//
// Fixes
//

//
// Card
//

.card {
  @include elevation(2);

  .card {
    @include elevation(0);

    border: $border-width solid $card-border-color;
    border-radius: $border-radius;
  }

  .card-header .card-header-tabs {
    padding-right: $card-spacer-x;
    padding-left: $card-spacer-x;
    margin-right: -$card-spacer-x;
    margin-left: -$card-spacer-x;
  }
}

//
// Dropdowns
//

.dropdown-menu {
  overflow: hidden;
  a {
    @include ripple();
  }
}

//
// Nav
//

.navbar {
  @include elevation(6);
}

.nav-tabs {
  border-bottom: $border-width solid $card-border-color;

  a {
    @include ripple();
    color: $text-muted;

    &.active {
      color: $nav-tabs-link-active-color;
    }
  }

  .nav-item .nav-link {
    &.active {
      margin-bottom: -$border-width;
      border-bottom: $border-width * 2 solid $primary;
    }
  }
}

//
// Forms
//

@mixin border-bottom-accent($padding-bottom) {
  border-bottom: $border-width solid $input-border-color;
  &:disabled { border-bottom-style: dashed; }

  &:focus,
  &.focus {
    border-bottom: $border-width * 2 solid $input-focus-border-color;
    padding-bottom: calc(#{$padding-bottom} - #{$border-width});
  }
}

.form-control,
.custom-select {
  @include border-bottom-accent($input-padding-y);
}

.input-group-sm .form-control,
.custom-select-sm {
  @include border-bottom-accent($input-padding-y-sm);
}

.input-group-lg .form-control,
.custom-select-lg {
  @include border-bottom-accent($input-padding-y-lg);
}

$input-addon-padding: 0.5rem;
.input-group-prepend .input-group-text { padding-right: $input-addon-padding; }
.input-group-append .input-group-text { padding-left: $input-addon-padding; }

.custom-control label:hover,
.custom-select {
  cursor: pointer;
}

select.custom-select {
  // idk why is this needed for .custom-select and .form-control alignment
  height: calc(#{$custom-select-height} + #{$border-width});
  @include transition($input-transition);

  -moz-appearance: none; // Firefox
  -webkit-appearance: none; // Safari and Chrome
  appearance: none;
}

//
// Buttons
//

$btn-active-selector: "&.btn:not(:disabled):not(.disabled):active,
   &.btn:not(:disabled):not(.disabled).active";

@each $color, $value in $theme-colors {
  .btn-#{$color} {
    @include ripple(color-yiq($value));
    @include button-variant($value, $value, $value, $value, $value, $value);
  }
  .btn-outline-#{$color} {
    @include ripple($value);
    &:hover {
      color: $value;
      background-color: transparentize($value, 0.85);
    }
    #{$btn-active-selector} {
      color: $value;
      background-color: transparentize($value, 0.85);
      box-shadow: none;
      &:focus {
        box-shadow: none;
      }
    }
  }
}

.btn-link,
.btn-link:hover,
.btn-link:active,
.btn-link:focus {
  #{$btn-active-selector} {
    box-shadow: none;
  }
}

.btn-group {
  @include elevation(2);
  border-radius: $btn-border-radius;

  .btn {
    box-shadow: none;
    #{$btn-active-selector} {
      box-shadow: none;
    }
  }
}

//
// Modals
//

.modal-content div + div {
  padding-top: 0;
}

//
// Alerts
//

@each $color, $value in $theme-colors {
  .alert.alert-#{$color} {
    color: color-yiq($value);
  }
}

//
// Pagination
//

.pagination .page-link {
  border-radius: $border-radius;
}

//
// Quotes
//

.blockquote {
  border-left: 0.4rem solid transparentize($body-color, 0.75);
  padding-left: 0.7rem;
}

//
// Progress
//

.progress {
  position: relative;
  overflow: hidden;
  .progress-bar-animated {
    &:before {
      content: '';
      position: absolute;
      background-color: inherit;
      top: 0;
      left: 0;
      bottom: 0;
      will-change: left, right;
      animation: indeterminate 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;

    }
    &:after {
      content: '';
      position: absolute;
      background-color: inherit;
      top: 0;
      left: 0;
      bottom: 0;
      will-change: left, right;
      animation: indeterminate-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
      animation-delay: 1.15s;
    }
  }
}

@keyframes indeterminate {
  0% {
    left: -35%;
    right: 100%;
  }
  60% {
    left: 100%;
    right: -90%;
  }
  100% {
    left: 100%;
    right: -90%;
  }
}

@keyframes indeterminate-short {
  0% {
    left: -200%;
    right: 100%;
  }
  60% {
    left: 107%;
    right: -8%;
  }
  100% {
    left: 107%;
    right: -8%;
  }
}
